import{__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import*as React from"react";import{Coin,CoinSize}from"../../Coin";import{getUniquefiedIdentityName}from"../../Utilities/PersonaHelper";var Persona=function(r){function e(e){var t=r.call(this,e)||this;return t.targetElement=React.createRef(),t.showIdentityCard=function(){t.props.personaProvider&&t.props.personaProvider.renderIdentityCard&&t.setState({showIdentityCard:!0})},t.onClick=function(e){t.props.personaProvider&&t.props.personaProvider.renderIdentityCard&&t.setState({showIdentityCard:!0}),e.preventDefault()},t.hideIdentityCard=function(){t.setState({showIdentityCard:!1})},t.state={imageError:!1,imageLoaded:!1,showIdentityCard:!1},t}return __extends(e,r),e.prototype.render=function(){var e=this.props,t=e.ariaLabel,r=e.ariaHidden,i=e.className,n=e.personaProvider,a=e.identity,o=e.role,s=e.size,e=e.tooltipProps,d=!!n&&!!n.renderIdentityCard,p=a.image||a.imageUrl,m="entityId"in a?getUniquefiedIdentityName(a):"";return React.createElement(React.Fragment,null,React.createElement("div",{"aria-hidden":r,ref:this.targetElement},React.createElement(Coin,{ariaLabel:t,className:i,dataIsFocusable:d,isTabStop:d,onClick:d?this.onClick:void 0,displayName:a.displayName||"",principalName:m,imageUrl:this.getServerImageFromSize(p),role:o,size:s,tooltipProps:e})),this.state.showIdentityCard&&n&&n.renderIdentityCard&&n.renderIdentityCard(a,n,this.hideIdentityCard,this.targetElement.current))},e.prototype.getServerImageFromSize=function(e){if(e){if(this.props.size){if(this.props.size<=CoinSize.size24)return e+(-1===e.indexOf("?")?"?size=0":"&size=0");if(this.props.size>CoinSize.size40)return e+(-1===e.indexOf("?")?"?size=2":"&size=2")}return e}},e}(React.Component);export{Persona};