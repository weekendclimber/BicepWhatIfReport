import*as Culture from"../../Core/Util/Culture";function prepareForComparison(r,e){return r?e?r.toLocaleUpperCase():r:""}function comparer(r,e,t){return r===e?0:prepareForComparison(r,t).localeCompare(prepareForComparison(e,t),navigator.language)}function localeComparer(r,e){return comparer(r,e,!1)}function localeIgnoreCaseComparer(r,e){return comparer(r,e,!0)}function equals(r,e,t){return t?0===localeIgnoreCaseComparer(r,e):0===localeComparer(r,e)}function equalsNullable(r,e,t){return r===e||null!=r&&null!=e&&equals(r,e,t)}function startsWith(r,e,t){return 0===(t?localeIgnoreCaseComparer:localeComparer)(e,r.substr(0,e.length))}function endsWith(r,e,t){return 0===(t?localeIgnoreCaseComparer:localeComparer)(e,r.substr(r.length-e.length,e.length))}function caseInsensitiveContains(r,e){return-1!==r.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())}function format(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return _stringFormat(!1,r,e)}function localeFormat(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return _stringFormat(!0,r,e)}function _stringFormat(r,e,t){for(var n="",a=0;;){var o=e.indexOf("{",a),i=e.indexOf("}",a);if(o<0&&i<0){n+=e.slice(a);break}if(0<i&&(i<o||o<0)){if("}"!==e.charAt(i+1))throw new Error("The format string contains an unmatched opening or closing brace.");n+=e.slice(a,i+1),a=i+2}else if(n+=e.slice(a,o),"{"===e.charAt(a=o+1))n+="{",a++;else{if(i<0)throw new Error("The format string contains an unmatched opening or closing brace.");var o=e.substring(a,i),u=o.indexOf(":"),s=parseInt(u<0?o:o.substring(0,u),10);if(isNaN(s))throw new Error("The format string is invalid.");o=u<0?"":o.substring(u+1),u=t[s];(u=null==u?"":u).toFormattedString?n+=u.toFormattedString(o):"number"==typeof u?n+=numberToString(u,r,o):u instanceof Date?n+=dateToString(u,r):u.format?n+=u.format(o):n+=u.toString(),a=i+1}}return n}var localeFormatters="Intl"in window?{date:new Intl.DateTimeFormat,dateTime:new Intl.DateTimeFormat(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}:{};function dateToString(r,e){var t="string"==typeof e?e:"dateTime";return e?(localeFormatters[t]||localeFormatters.dateTime).format(r):r.toString()}var EmptyGuidString="00000000-0000-0000-0000-000000000000";function isGuid(r){return/^\{?([\dA-F]{8})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{12})\}?$/i.test(r)}function newGuid(){var r=(128+Math.floor(64*Math.random())).toString(16);return oct(8)+"-"+oct(4)+"-4"+oct(3)+"-"+r+oct(2)+"-"+oct(12)}var controlChars=/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F-\u009F]/;function containsControlChars(r){return controlChars.test(r)}var surrogateChars=/(^[\uD800-\uDFFF]$)|[^\uD800-\uDBFF](?=[\uDC00-\uDFFF])|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function containsMismatchedSurrogateChars(r){return surrogateChars.test(r)}function numberToString(r,e,t){if(!t||0===t.length||"i"===t)return e?r.toLocaleString():r.toString();function g(r,e,t){for(var n=r.length;n<e;n++)r=t?"0"+r:r+"0";return r}function n(r,e,t,n,a){var o=t[0],i=1,u=Math.pow(10,e),u=Math.round(r*u)/u,s="",u=(c=(r=u=isFinite(u)?u:r).toString()).split(/e/i),c=u[0],r=1<u.length?parseInt(u[1]):0;c=(u=c.split("."))[0],s=1<u.length?u[1]:"",0<r?(c+=(s=g(s,r,!1)).slice(0,r),s=s.substr(r)):r<0&&(s=(c=g(c,1+(r=-r),!0)).slice(-r,c.length)+s,c=c.slice(0,-r));for(var s=0<e?a+(s=s.length>e?s.slice(0,e):g(s,e,!1)):"",l=c.length-1,m="";0<=l;){if(0===o||l<o)return 0<m.length?c.slice(0,l+1)+n+m+s:c.slice(0,l+1)+s;m=0<m.length?c.slice(l-o+1,l+1)+n+m:c.slice(l-o+1,l+1),l-=o,i<t.length&&(o=t[i],i++)}return c.slice(0,l+1)+n+m+s}var a,o,i=(e?Culture.getCurrentCulture():Culture.getInvariantCulture()).numberFormat,u=-1;switch(1<(t=t||"D").length&&(u=parseInt(t.slice(1),10)),t.charAt(0)){case"d":case"D":o="n",-1!==u?(a=g(""+Math.abs(r),u,!0),r<0&&(a="-"+a)):a=""+r;break;case"c":case"C":o=r<0?["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"][i.CurrencyNegativePattern]:["$n","n$","$ n","n $"][i.CurrencyPositivePattern],-1===u&&(u=i.CurrencyDecimalDigits),a=n(Math.abs(r),u,i.CurrencyGroupSizes,i.CurrencyGroupSeparator,i.CurrencyDecimalSeparator);break;case"n":case"N":o=r<0?["(n)","-n","- n","n-","n -"][i.NumberNegativePattern]:"n",-1===u&&(u=i.NumberDecimalDigits),a=n(Math.abs(r),u,i.NumberGroupSizes,i.NumberGroupSeparator,i.NumberDecimalSeparator);break;case"p":case"P":o=r<0?["-n %","-n%","-%n"][i.PercentNegativePattern]:["n %","n%","%n"][i.PercentPositivePattern],-1===u&&(u=i.PercentDecimalDigits),a=n(100*Math.abs(r),u,i.PercentGroupSizes,i.PercentGroupSeparator,i.PercentDecimalSeparator);break;default:throw new Error("Format specifier was invalid.")}for(var s=/n|\$|-|%/g,c="";;){var l=s.lastIndex,m=s.exec(o);if(c+=o.slice(l,m?m.index:o.length),!m)break;switch(m[0]){case"n":c+=a;break;case"$":c+=i.CurrencySymbol;break;case"-":/[1-9]/.test(a)&&(c+=i.NegativeSign);break;case"%":c+=i.PercentSymbol;break;default:throw new Error("Invalid number format pattern")}}return c}function oct(r){for(var e="",t=0;t<r;t++)e+=Math.floor(16*Math.random()).toString(16);return e}function safeSubstring(r,e,t){for(e=Math.max(0,Math.min(e,r.length)),t=Math.min(r.length,Math.max(t,0));e<t&&56320==(64512&r.charCodeAt(e));)e++;for(;e<t&&55296==(64512&r.charCodeAt(t-1));)t--;return r.substring(e,t)}export{localeComparer,localeIgnoreCaseComparer,equals,equalsNullable,startsWith,endsWith,caseInsensitiveContains,format,localeFormat,dateToString,EmptyGuidString,isGuid,newGuid,containsControlChars,containsMismatchedSurrogateChars,numberToString,safeSubstring};